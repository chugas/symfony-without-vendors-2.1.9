/*! jQuery UI - v1.11.1 - 2014-09-17
* http://jqueryui.com
* Includes: widget.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(c){
/*!
 * jQuery UI Widget 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var d=0,a=Array.prototype.slice;c.cleanData=(function(e){return function(f){var h,j,g;for(g=0;(j=f[g])!=null;g++){try{h=c._data(j,"events");if(h&&h.remove){c(j).triggerHandler("remove")}}catch(k){}}e(f)}})(c.cleanData);c.widget=function(e,f,m){var j,k,h,l,g={},i=e.split(".")[0];e=e.split(".")[1];j=i+"-"+e;if(!m){m=f;f=c.Widget}c.expr[":"][j.toLowerCase()]=function(n){return !!c.data(n,j)};c[i]=c[i]||{};k=c[i][e];h=c[i][e]=function(n,o){if(!this._createWidget){return new h(n,o)}if(arguments.length){this._createWidget(n,o)}};c.extend(h,k,{version:m.version,_proto:c.extend({},m),_childConstructors:[]});l=new f();l.options=c.widget.extend({},l.options);c.each(m,function(o,n){if(!c.isFunction(n)){g[o]=n;return}g[o]=(function(){var p=function(){return f.prototype[o].apply(this,arguments)},q=function(r){return f.prototype[o].apply(this,r)};return function(){var t=this._super,r=this._superApply,s;this._super=p;this._superApply=q;s=n.apply(this,arguments);this._super=t;this._superApply=r;return s}})()});h.prototype=c.widget.extend(l,{widgetEventPrefix:k?(l.widgetEventPrefix||e):e},g,{constructor:h,namespace:i,widgetName:e,widgetFullName:j});if(k){c.each(k._childConstructors,function(o,p){var n=p.prototype;c.widget(n.namespace+"."+n.widgetName,h,p._proto)});delete k._childConstructors}else{f._childConstructors.push(h)}c.widget.bridge(e,h);return h};c.widget.extend=function(j){var f=a.call(arguments,1),i=0,e=f.length,g,h;for(;i<e;i++){for(g in f[i]){h=f[i][g];if(f[i].hasOwnProperty(g)&&h!==undefined){if(c.isPlainObject(h)){j[g]=c.isPlainObject(j[g])?c.widget.extend({},j[g],h):c.widget.extend({},h)}else{j[g]=h}}}}return j};c.widget.bridge=function(f,e){var g=e.prototype.widgetFullName||f;c.fn[f]=function(j){var h=typeof j==="string",i=a.call(arguments,1),k=this;j=!h&&i.length?c.widget.extend.apply(null,[j].concat(i)):j;if(h){this.each(function(){var m,l=c.data(this,g);if(j==="instance"){k=l;return false}if(!l){return c.error("cannot call methods on "+f+" prior to initialization; attempted to call method '"+j+"'")}if(!c.isFunction(l[j])||j.charAt(0)==="_"){return c.error("no such method '"+j+"' for "+f+" widget instance")}m=l[j].apply(l,i);if(m!==l&&m!==undefined){k=m&&m.jquery?k.pushStack(m.get()):m;return false}})}else{this.each(function(){var l=c.data(this,g);if(l){l.option(j||{});if(l._init){l._init()}}else{c.data(this,g,new e(j,this))}})}return k}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(e,f){f=c(f||this.defaultElement||this)[0];this.element=c(f);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=c.widget.extend({},this.options,this._getCreateOptions(),e);this.bindings=c();this.hoverable=c();this.focusable=c();if(f!==this){c.data(f,this.widgetFullName,this);this._on(true,this.element,{remove:function(g){if(g.target===f){this.destroy()}}});this.document=c(f.style?f.ownerDocument:f.document||f);this.window=c(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(h,j){var e=h,k,g,f;if(arguments.length===0){return c.widget.extend({},this.options)}if(typeof h==="string"){e={};k=h.split(".");h=k.shift();if(k.length){g=e[h]=c.widget.extend({},this.options[h]);for(f=0;f<k.length-1;f++){g[k[f]]=g[k[f]]||{};g=g[k[f]]}h=k.pop();if(arguments.length===1){return g[h]===undefined?null:g[h]}g[h]=j}else{if(arguments.length===1){return this.options[h]===undefined?null:this.options[h]}e[h]=j}}this._setOptions(e);return this},_setOptions:function(e){var f;for(f in e){this._setOption(f,e[f])}return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!f);if(f){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(h,g,f){var i,e=this;if(typeof h!=="boolean"){f=g;g=h;h=false}if(!f){f=g;g=this.element;i=this.widget()}else{g=i=c(g);this.bindings=this.bindings.add(g)}c.each(f,function(o,n){function l(){if(!h&&(e.options.disabled===true||c(this).hasClass("ui-state-disabled"))){return}return(typeof n==="string"?e[n]:n).apply(e,arguments)}if(typeof n!=="string"){l.guid=n.guid=n.guid||l.guid||c.guid++}var m=o.match(/^([\w:-]*)\s*(.*)$/),k=m[1]+e.eventNamespace,j=m[2];if(j){i.delegate(j,k,l)}else{g.bind(k,l)}})},_off:function(f,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;f.unbind(e).undelegate(e)},_delay:function(h,g){function f(){return(typeof h==="string"?e[h]:h).apply(e,arguments)}var e=this;return setTimeout(f,g||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(f){c(f.currentTarget).addClass("ui-state-hover")},mouseleave:function(f){c(f.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(f){c(f.currentTarget).addClass("ui-state-focus")},focusout:function(f){c(f.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,f,g){var j,i,h=this.options[e];g=g||{};f=c.Event(f);f.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();f.target=this.element[0];i=f.originalEvent;if(i){for(j in i){if(!(j in f)){f[j]=i[j]}}}this.element.trigger(f,g);return !(c.isFunction(h)&&h.apply(this.element[0],[f].concat(g))===false||f.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(f,e){c.Widget.prototype["_"+f]=function(i,h,k){if(typeof h==="string"){h={effect:h}}var j,g=!h?f:h===true||typeof h==="number"?e:h.effect||e;h=h||{};if(typeof h==="number"){h={duration:h}}j=!c.isEmptyObject(h);h.complete=k;if(h.delay){i.delay(h.delay)}if(j&&c.effects&&c.effects.effect[g]){i[f](h)}else{if(g!==f&&i[g]){i[g](h.duration,h.easing,k)}else{i.queue(function(l){c(this)[f]();if(k){k.call(i[0])}l()})}}}});var b=c.widget}));
(function(b){var a=function(e,d){var c=!/[^\w\-\.:]/.test(e)?a.cache[e]=a.cache[e]||a(a.load(e)):new Function(a.arg+",tmpl","var _e=tmpl.encode"+a.helper+",_s='"+e.replace(a.regexp,a.func)+"';return _s;");return d?c(d,a):function(f){return c(f,a)}};a.cache={};a.load=function(c){return document.getElementById(c).innerHTML};a.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;a.func=function(d,h,g,f,e,c){if(h){return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[h]||"\\"+h}if(g){if(g==="="){return"'+_e("+f+")+'"}return"'+("+f+"==null?'':"+f+")+'"}if(e){return"';"}if(c){return"_s+='"}};a.encReg=/[<>&"'\x00]/g;a.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};a.encode=function(c){return(c==null?"":""+c).replace(a.encReg,function(d){return a.encMap[d]||""})};a.arg="o";a.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}";if(typeof define==="function"&&define.amd){define(function(){return a})}else{b.tmpl=a}}(this));
!function(e){var d=function(b,l,k){var j,i,h=document.createElement("img");if(h.onerror=l,h.onload=function(){!i||k&&k.noRevoke||d.revokeObjectURL(i),l&&l(d.scale(h,k))},d.isInstanceOf("Blob",b)||d.isInstanceOf("File",b)){j=i=d.createObjectURL(b),h._type=b.type}else{if("string"!=typeof b){return !1}j=b,k&&k.crossOrigin&&(h.crossOrigin=k.crossOrigin)}return j?(h.src=j,h):d.readFile(b,function(g){var c=g.target;c&&c.result?h.src=c.result:l&&l(g)})},f=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;d.isInstanceOf=function(g,c){return Object.prototype.toString.call(c)==="[object "+g+"]"},d.transformCoordinates=function(){},d.getTransformedOptions=function(i,h){var n,m,l,k,j=h.aspectRatio;if(!j){return h}n={};for(m in h){h.hasOwnProperty(m)&&(n[m]=h[m])}return n.crop=!0,l=i.naturalWidth||i.width,k=i.naturalHeight||i.height,l/k>j?(n.maxWidth=k*j,n.maxHeight=k):(n.maxWidth=l,n.maxHeight=l/j),n},d.renderImageToCanvas=function(t,s,r,q,p,o,n,m,l,k){return t.getContext("2d").drawImage(s,r,q,p,o,n,m,l,k),t},d.hasCanvasOption=function(b){return b.canvas||b.crop||b.aspectRatio},d.scale=function(L,K){K=K||{};var J,I,H,G,F,E,D,C,B,A=document.createElement("canvas"),z=L.getContext||d.hasCanvasOption(K)&&A.getContext,y=L.naturalWidth||L.width,x=L.naturalHeight||L.height,w=y,v=x,u=function(){var c=Math.max((H||w)/w,(G||v)/v);c>1&&(w*=c,v*=c)},b=function(){var c=Math.min((J||w)/w,(I||v)/v);1>c&&(w*=c,v*=c)};return z&&(K=d.getTransformedOptions(L,K),D=K.left||0,C=K.top||0,K.sourceWidth?(F=K.sourceWidth,void 0!==K.right&&void 0===K.left&&(D=y-F-K.right)):F=y-D-(K.right||0),K.sourceHeight?(E=K.sourceHeight,void 0!==K.bottom&&void 0===K.top&&(C=x-E-K.bottom)):E=x-C-(K.bottom||0),w=F,v=E),J=K.maxWidth,I=K.maxHeight,H=K.minWidth,G=K.minHeight,z&&J&&I&&K.crop?(w=J,v=I,B=F/E-J/I,0>B?(E=I*F/J,void 0===K.top&&void 0===K.bottom&&(C=(x-E)/2)):B>0&&(F=J*E/I,void 0===K.left&&void 0===K.right&&(D=(y-F)/2))):((K.contain||K.cover)&&(H=J=J||H,G=I=I||G),K.cover?(b(),u()):(u(),b())),z?(A.width=w,A.height=v,d.transformCoordinates(A,K),d.renderImageToCanvas(A,L,D,C,F,E,0,0,w,v)):(L.width=w,L.height=v,L)},d.createObjectURL=function(b){return f?f.createObjectURL(b):!1},d.revokeObjectURL=function(b){return f?f.revokeObjectURL(b):!1},d.readFile=function(h,g,j){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=g,j=j||"readAsDataURL",i[j]){return i[j](h),i}}return !1},"function"==typeof define&&define.amd?define(function(){return d}):e.loadImage=d}(this),function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)}(function(d){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var c=d.renderImageToCanvas;d.detectSubsampling=function(f){var e,g;return f.width*f.height>1048576?(e=document.createElement("canvas"),e.width=e.height=1,g=e.getContext("2d"),g.drawImage(f,-f.width+1,0),0===g.getImageData(0,0,1,1).data[3]):!1},d.detectVerticalSquash=function(t,s){var r,q,p,o,n,m=t.naturalHeight||t.height,l=document.createElement("canvas"),k=l.getContext("2d");for(s&&(m/=2),l.width=1,l.height=m,k.drawImage(t,0,0),r=k.getImageData(0,0,1,m).data,q=0,p=m,o=m;o>q;){n=r[4*(o-1)+3],0===n?p=o:q=o,o=p+q>>1}return o/m||1},d.renderImageToCanvas=function(J,I,H,G,F,E,D,C,B,A){if("image/jpeg"===I._type){var z,y,x,w,v=J.getContext("2d"),u=document.createElement("canvas"),b=1024,a=u.getContext("2d");if(u.width=b,u.height=b,v.save(),z=d.detectSubsampling(I),z&&(H/=2,G/=2,F/=2,E/=2),y=d.detectVerticalSquash(I,z),z||1!==y){for(G*=y,B=Math.ceil(b*B/F),A=Math.ceil(b*A/E/y),C=0,w=0;E>w;){for(D=0,x=0;F>x;){a.clearRect(0,0,b,b),a.drawImage(I,H,G,F,E,-x,-w,F,E),v.drawImage(u,0,0,b,b,D,C,B,A),x+=b,D+=B}w+=b,C+=A}return v.restore(),J}}return c(J,I,H,G,F,E,D,C,B,A)}}}),function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)}(function(f){var e=f.hasCanvasOption,h=f.transformCoordinates,g=f.getTransformedOptions;f.hasCanvasOption=function(a){return e.call(f,a)||a.orientation},f.transformCoordinates=function(a,l){h.call(f,a,l);var k=a.getContext("2d"),j=a.width,i=a.height,c=l.orientation;if(c&&!(c>8)){switch(c>4&&(a.width=i,a.height=j),c){case 2:k.translate(j,0),k.scale(-1,1);break;case 3:k.translate(j,i),k.rotate(Math.PI);break;case 4:k.translate(0,i),k.scale(1,-1);break;case 5:k.rotate(0.5*Math.PI),k.scale(1,-1);break;case 6:k.rotate(0.5*Math.PI),k.translate(0,-i);break;case 7:k.rotate(0.5*Math.PI),k.translate(j,-i),k.scale(-1,1);break;case 8:k.rotate(-0.5*Math.PI),k.translate(-j,0)}}},f.getTransformedOptions=function(a,l){var k,j,i=g.call(f,a,l),d=i.orientation;if(!d||d>8||1===d){return i}k={};for(j in i){i.hasOwnProperty(j)&&(k[j]=i[j])}switch(i.orientation){case 2:k.left=i.right,k.right=i.left;break;case 3:k.left=i.right,k.top=i.bottom,k.right=i.left,k.bottom=i.top;break;case 4:k.top=i.bottom,k.bottom=i.top;break;case 5:k.left=i.top,k.top=i.left,k.right=i.bottom,k.bottom=i.right;break;case 6:k.left=i.top,k.top=i.right,k.right=i.bottom,k.bottom=i.left;break;case 7:k.left=i.bottom,k.top=i.right,k.right=i.top,k.bottom=i.left;break;case 8:k.left=i.bottom,k.top=i.left,k.right=i.top,k.bottom=i.right}return i.orientation>4&&(k.maxWidth=i.maxHeight,k.maxHeight=i.maxWidth,k.minWidth=i.minHeight,k.minHeight=i.minWidth,k.sourceWidth=i.sourceHeight,k.sourceHeight=i.sourceWidth),k}}),function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)}(function(d){var c=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);d.blobSlice=c&&function(){var b=this.slice||this.webkitSlice||this.mozSlice;return b.apply(this,arguments)},d.metaDataParsers={jpeg:{65505:[]}},d.parseMetaData=function(a,n,m){m=m||{};var l=this,k=m.maxMetaDataSize||262144,j={},i=!(window.DataView&&a&&a.size>=12&&"image/jpeg"===a.type&&d.blobSlice);(i||!d.readFile(d.blobSlice.call(a,0,k),function(w){if(w.target.error){return console.log(w.target.error),void n(j)}var v,u,t,s,r=w.target.result,q=new DataView(r),p=2,g=q.byteLength-4,e=p;if(65496===q.getUint16(0)){for(;g>p&&(v=q.getUint16(p),v>=65504&&65519>=v||65534===v);){if(u=q.getUint16(p+2)+2,p+u>q.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(t=d.metaDataParsers.jpeg[v]){for(s=0;s<t.length;s+=1){t[s].call(l,q,p,u,j,m)}}p+=u,e=p}!m.disableImageHead&&e>6&&(j.imageHead=r.slice?r.slice(0,e):new Uint8Array(r).subarray(0,e))}else{console.log("Invalid JPEG file: Missing JPEG marker.")}n(j)},"readAsArrayBuffer"))&&n(j)}}),function(b){"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],b):b(window.loadImage)}(function(b){b.ExifMap=function(){return this},b.ExifMap.prototype.map={Orientation:274},b.ExifMap.prototype.get=function(c){return this[c]||this[this.map[c]]},b.getExifThumbnail=function(h,g,l){var k,j,i;if(!l||g+l>h.byteLength){return void console.log("Invalid Exif data: Invalid thumbnail data.")}for(k=[],j=0;l>j;j+=1){i=h.getUint8(g+j),k.push((16>i?"0":"")+i.toString(16))}return"data:image/jpeg,%"+k.join("%")},b.exifTagTypes={1:{getValue:function(d,c){return d.getUint8(c)},size:1},2:{getValue:function(d,c){return String.fromCharCode(d.getUint8(c))},size:1,ascii:!0},3:{getValue:function(e,d,f){return e.getUint16(d,f)},size:2},4:{getValue:function(e,d,f){return e.getUint32(d,f)},size:4},5:{getValue:function(e,d,f){return e.getUint32(d,f)/e.getUint32(d+4,f)},size:8},9:{getValue:function(e,d,f){return e.getInt32(d,f)},size:4},10:{getValue:function(e,d,f){return e.getInt32(d,f)/e.getInt32(d+4,f)},size:8}},b.exifTagTypes[7]=b.exifTagTypes[1],b.getExifValue=function(z,y,x,w,v,u){var t,s,r,q,p,o,a=b.exifTagTypes[w];if(!a){return void console.log("Invalid Exif data: Invalid tag type.")}if(t=a.size*v,s=t>4?y+z.getUint32(x+8,u):x+8,s+t>z.byteLength){return void console.log("Invalid Exif data: Invalid data offset.")}if(1===v){return a.getValue(z,s,u)}for(r=[],q=0;v>q;q+=1){r[q]=a.getValue(z,s+q*a.size,u)}if(a.ascii){for(p="",q=0;q<r.length&&(o=r[q],"\x00"!==o);q+=1){p+=o}return p}return r},b.parseExifTag=function(a,l,k,j,i){var h=a.getUint16(k,j);i.exif[h]=b.getExifValue(a,l,k,a.getUint16(k+2,j),a.getUint32(k+4,j),j)},b.parseExifTags=function(j,i,p,o,n){var m,l,k;if(p+6>j.byteLength){return void console.log("Invalid Exif data: Invalid directory offset.")}if(m=j.getUint16(p,o),l=p+2+12*m,l+4>j.byteLength){return void console.log("Invalid Exif data: Invalid directory size.")}for(k=0;m>k;k+=1){this.parseExifTag(j,i,p+2+12*k,o,n)}return j.getUint32(l,o)},b.parseExifData=function(r,q,p,o,n){if(!n.disableExif){var m,l,k,a=q+10;if(1165519206===r.getUint32(q+4)){if(a+8>r.byteLength){return void console.log("Invalid Exif data: Invalid segment size.")}if(0!==r.getUint16(q+8)){return void console.log("Invalid Exif data: Missing byte alignment offset.")}switch(r.getUint16(a)){case 18761:m=!0;break;case 19789:m=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==r.getUint16(a+2,m)){return void console.log("Invalid Exif data: Missing TIFF marker.")}l=r.getUint32(a+4,m),o.exif=new b.ExifMap,l=b.parseExifTags(r,a,a+l,m,o),l&&!n.disableExifThumbnail&&(k={exif:{}},l=b.parseExifTags(r,a,a+l,m,k),k.exif[513]&&(o.exif.Thumbnail=b.getExifThumbnail(r,a+k.exif[513],k.exif[514]))),o.exif[34665]&&!n.disableExifSub&&b.parseExifTags(r,a,a+o.exif[34665],m,o),o.exif[34853]&&!n.disableExifGps&&b.parseExifTags(r,a,a+o.exif[34853],m,o)}}},b.metaDataParsers.jpeg[65505].push(b.parseExifData)}),function(b){"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],b):b(window.loadImage)}(function(b){b.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},b.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},b.ExifMap.prototype.getText=function(d){var c=this.get(d);switch(d){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[d][c];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(c[0],c[1],c[2],c[3]);case"ComponentsConfiguration":return this.stringValues[d][c[0]]+this.stringValues[d][c[1]]+this.stringValues[d][c[2]]+this.stringValues[d][c[3]];case"GPSVersionID":return c[0]+"."+c[1]+"."+c[2]+"."+c[3]}return String(c)},function(f){var e,h=f.tags,g=f.map;for(e in h){h.hasOwnProperty(e)&&(g[h[e]]=e)}}(b.ExifMap.prototype),b.ExifMap.prototype.getAll=function(){var e,d,f={};for(e in this){this.hasOwnProperty(e)&&(d=this.tags[e],d&&(f[d]=this.getText(d)))}return f}});
!function(h){var g=h.HTMLCanvasElement&&h.HTMLCanvasElement.prototype,l=h.Blob&&function(){try{return Boolean(new Blob)}catch(b){return !1}}(),k=l&&h.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(b){return !1}}(),j=h.BlobBuilder||h.WebKitBlobBuilder||h.MozBlobBuilder||h.MSBlobBuilder,i=(l||j)&&h.atob&&h.ArrayBuffer&&h.Uint8Array&&function(d){var c,p,o,n,m,e;for(c=d.split(",")[0].indexOf("base64")>=0?atob(d.split(",")[1]):decodeURIComponent(d.split(",")[1]),p=new ArrayBuffer(c.length),o=new Uint8Array(p),n=0;n<c.length;n+=1){o[n]=c.charCodeAt(n)}return m=d.split(",")[0].split(":")[1].split(";")[0],l?new Blob([k?o:p],{type:m}):(e=new j,e.append(p),e.getBlob(m))};h.HTMLCanvasElement&&!g.toBlob&&(g.mozGetAsFile?g.toBlob=function(b,f,e){e&&g.toDataURL&&i?b(i(this.toDataURL(f,e))):b(this.mozGetAsFile("blob",f))}:g.toDataURL&&i&&(g.toBlob=function(e,d,f){e(i(this.toDataURL(d,f)))})),"function"==typeof define&&define.amd?define(function(){return i}):h.dataURLtoBlob=i}(this);
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(b){var a=0;b.ajaxTransport("iframe",function(d){if(d.async){var c=d.initialIframeSrc||"javascript:false;",f,e,g;return{send:function(h,i){f=b('<form style="display:none;"></form>');f.attr("accept-charset",d.formAcceptCharset);g=/\?/.test(d.url)?"&":"?";if(d.type==="DELETE"){d.url=d.url+g+"_method=DELETE";d.type="POST"}else{if(d.type==="PUT"){d.url=d.url+g+"_method=PUT";d.type="POST"}else{if(d.type==="PATCH"){d.url=d.url+g+"_method=PATCH";d.type="POST"}}}a+=1;e=b('<iframe src="'+c+'" name="iframe-transport-'+a+'"></iframe>').bind("load",function(){var j,k=b.isArray(d.paramName)?d.paramName:[d.paramName];e.unbind("load").bind("load",function(){var l;try{l=e.contents();if(!l.length||!l[0].firstChild){throw new Error()}}catch(m){l=undefined}i(200,"success",{iframe:l});b('<iframe src="'+c+'"></iframe>').appendTo(f);window.setTimeout(function(){f.remove()},0)});f.prop("target",e.prop("name")).prop("action",d.url).prop("method",d.type);if(d.formData){b.each(d.formData,function(l,m){b('<input type="hidden"/>').prop("name",m.name).val(m.value).appendTo(f)})}if(d.fileInput&&d.fileInput.length&&d.type==="POST"){j=d.fileInput.clone();d.fileInput.after(function(l){return j[l]});if(d.paramName){d.fileInput.each(function(l){b(this).prop("name",k[l]||d.paramName)})}f.append(d.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");d.fileInput.removeAttr("form")}f.submit();if(j&&j.length){d.fileInput.each(function(m,l){var n=b(j[m]);b(l).prop("name",n.prop("name")).attr("form",n.attr("form"));n.replaceWith(l)})}});f.append(e).appendTo(document.body)},abort:function(){if(e){e.unbind("load").prop("src",c)}if(f){f.remove()}}}}});b.ajaxSetup({converters:{"iframe text":function(c){return c&&b(c[0].body).text()},"iframe json":function(c){return c&&b.parseJSON(b(c[0].body).text())},"iframe html":function(c){return c&&b(c[0].body).html()},"iframe xml":function(c){var d=c&&c[0];return d&&b.isXMLDoc(d)?d:b.parseXML((d.XMLDocument&&d.XMLDocument.xml)||b(d.body).html())},"iframe script":function(c){return c&&b.globalEval(b(c[0].body).text())}}})}));
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],a)}else{a(window.jQuery)}}(function(b){b.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||b('<input type="file">').prop("disabled"));b.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);b.support.xhrFormDataFileUpload=!!window.FormData;b.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function a(c){var d=c==="dragover";return function(g){g.dataTransfer=g.originalEvent&&g.originalEvent.dataTransfer;var f=g.dataTransfer;if(f&&b.inArray("Files",f.types)!==-1&&this._trigger(c,b.Event(c,{delegatedEvent:g}))!==false){g.preventDefault();if(d){f.dropEffect="copy"}}}}b.widget("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(d,c){d=this.messages[d]||d.toString();if(c){b.each(c,function(e,f){d=d.replace("{"+e+"}",f)})}return d},formData:function(c){return c.serializeArray()},add:function(d,c){if(d.isDefaultPrevented()){return false}if(c.autoUpload||(c.autoUpload!==false&&b(this).fileupload("option","autoUpload"))){c.process().done(function(){c.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:b.support.blobSlice&&function(){var c=this.slice||this.webkitSlice||this.mozSlice;return c.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(e,d,c){var f=e-this.timestamp;if(!this.bitrate||!c||f>c){this.bitrate=(d-this.loaded)*(1000/f)*8;this.loaded=d;this.timestamp=e}return this.bitrate}},_isXHRUpload:function(c){return !c.forceIframeTransport&&((!c.multipart&&b.support.xhrFileUpload)||b.support.xhrFormDataFileUpload)},_getFormData:function(c){var d;if(b.type(c.formData)==="function"){return c.formData(c.form)}if(b.isArray(c.formData)){return c.formData}if(b.type(c.formData)==="object"){d=[];b.each(c.formData,function(e,f){d.push({name:e,value:f})});return d}return[]},_getTotal:function(d){var c=0;b.each(d,function(e,f){c+=f.size||1});return c},_initProgressObject:function(d){var c={loaded:0,total:0,bitrate:0};if(d._progress){b.extend(d._progress,c)}else{d._progress=c}},_initResponseObject:function(c){var d;if(c._response){for(d in c._response){if(c._response.hasOwnProperty(d)){delete c._response[d]}}}else{c._response={}}},_onProgress:function(g,f){if(g.lengthComputable){var d=((Date.now)?Date.now():(new Date()).getTime()),c;if(f._time&&f.progressInterval&&(d-f._time<f.progressInterval)&&g.loaded!==g.total){return}f._time=d;c=Math.floor(g.loaded/g.total*(f.chunkSize||f._progress.total))+(f.uploadedBytes||0);this._progress.loaded+=(c-f._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,f.bitrateInterval);f._progress.loaded=f.loaded=c;f._progress.bitrate=f.bitrate=f._bitrateTimer.getBitrate(d,c,f.bitrateInterval);this._trigger("progress",b.Event("progress",{delegatedEvent:g}),f);this._trigger("progressall",b.Event("progressall",{delegatedEvent:g}),this._progress)}},_initProgressListener:function(c){var d=this,e=c.xhr?c.xhr():b.ajaxSettings.xhr();if(e.upload){b(e.upload).bind("progress",function(f){var g=f.originalEvent;f.lengthComputable=g.lengthComputable;f.loaded=g.loaded;f.total=g.total;d._onProgress(f,c)});c.xhr=function(){return e}}},_isInstanceOf:function(c,d){return Object.prototype.toString.call(d)==="[object "+c+"]"},_initXHRData:function(d){var f=this,h,e=d.files[0],c=d.multipart||!b.support.xhrFileUpload,g=b.type(d.paramName)==="array"?d.paramName[0]:d.paramName;d.headers=b.extend({},d.headers);if(d.contentRange){d.headers["Content-Range"]=d.contentRange}if(!c||d.blob||!this._isInstanceOf("File",e)){d.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'}if(!c){d.contentType=e.type||"application/octet-stream";d.data=d.blob||e}else{if(b.support.xhrFormDataFileUpload){if(d.postMessage){h=this._getFormData(d);if(d.blob){h.push({name:g,value:d.blob})}else{b.each(d.files,function(i,j){h.push({name:(b.type(d.paramName)==="array"&&d.paramName[i])||g,value:j})})}}else{if(f._isInstanceOf("FormData",d.formData)){h=d.formData}else{h=new FormData();b.each(this._getFormData(d),function(i,j){h.append(j.name,j.value)})}if(d.blob){h.append(g,d.blob,e.name)}else{b.each(d.files,function(i,j){if(f._isInstanceOf("File",j)||f._isInstanceOf("Blob",j)){h.append((b.type(d.paramName)==="array"&&d.paramName[i])||g,j,j.uploadName||j.name)}})}}d.data=h}}d.blob=null},_initIframeSettings:function(c){var d=b("<a></a>").prop("href",c.url).prop("host");c.dataType="iframe "+(c.dataType||"");c.formData=this._getFormData(c);if(c.redirect&&d&&d!==location.host){c.formData.push({name:c.redirectParamName||"redirect",value:c.redirect})}},_initDataSettings:function(c){if(this._isXHRUpload(c)){if(!this._chunkedUpload(c,true)){if(!c.data){this._initXHRData(c)}this._initProgressListener(c)}if(c.postMessage){c.dataType="postmessage "+(c.dataType||"")}}else{this._initIframeSettings(c)}},_getParamName:function(c){var d=b(c.fileInput),e=c.paramName;if(!e){e=[];d.each(function(){var f=b(this),g=f.prop("name")||"files[]",h=(f.prop("files")||[1]).length;while(h){e.push(g);h-=1}});if(!e.length){e=[d.prop("name")||"files[]"]}}else{if(!b.isArray(e)){e=[e]}}return e},_initFormSettings:function(c){if(!c.form||!c.form.length){c.form=b(c.fileInput.prop("form"));if(!c.form.length){c.form=b(this.options.fileInput.prop("form"))}}c.paramName=this._getParamName(c);if(!c.url){c.url=c.form.prop("action")||location.href}c.type=(c.type||(b.type(c.form.prop("method"))==="string"&&c.form.prop("method"))||"").toUpperCase();if(c.type!=="POST"&&c.type!=="PUT"&&c.type!=="PATCH"){c.type="POST"}if(!c.formAcceptCharset){c.formAcceptCharset=c.form.attr("accept-charset")}},_getAJAXSettings:function(d){var c=b.extend({},this.options,d);this._initFormSettings(c);this._initDataSettings(c);return c},_getDeferredState:function(c){if(c.state){return c.state()}if(c.isResolved()){return"resolved"}if(c.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(c){c.success=c.done;c.error=c.fail;c.complete=c.always;return c},_getXHRPromise:function(f,e,d){var c=b.Deferred(),g=c.promise();e=e||this.options.context||g;if(f===true){c.resolveWith(e,d)}else{if(f===false){c.rejectWith(e,d)}}g.abort=c.promise;return this._enhancePromise(g)},_addConvenienceMethods:function(g,f){var d=this,c=function(e){return b.Deferred().resolveWith(d,e).promise()};f.process=function(h,e){if(h||e){f._processQueue=this._processQueue=(this._processQueue||c([this])).pipe(function(){if(f.errorThrown){return b.Deferred().rejectWith(d,[f]).promise()}return c(arguments)}).pipe(h,e)}return this._processQueue||c([this])};f.submit=function(){if(this.state()!=="pending"){f.jqXHR=this.jqXHR=(d._trigger("submit",b.Event("submit",{delegatedEvent:g}),this)!==false)&&d._onSend(g,this)}return this.jqXHR||d._getXHRPromise()};f.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";d._trigger("fail",null,this);return d._getXHRPromise(false)};f.state=function(){if(this.jqXHR){return d._getDeferredState(this.jqXHR)}if(this._processQueue){return d._getDeferredState(this._processQueue)}};f.processing=function(){return !this.jqXHR&&this._processQueue&&d._getDeferredState(this._processQueue)==="pending"};f.progress=function(){return this._progress};f.response=function(){return this._response}},_getUploadedBytes:function(e){var c=e.getResponseHeader("Range"),f=c&&c.split("-"),d=f&&f.length>1&&parseInt(f[1],10);return d&&d+1},_chunkedUpload:function(n,h){n.uploadedBytes=n.uploadedBytes||0;var g=this,e=n.files[0],f=e.size,c=n.uploadedBytes,d=n.maxChunkSize||f,j=this._blobSlice,k=b.Deferred(),m=k.promise(),i,l;if(!(this._isXHRUpload(n)&&j&&(c||d<f))||n.data){return false}if(h){return true}if(c>=f){e.error=n.i18n("uploadedBytes");return this._getXHRPromise(false,n.context,[null,"error",e.error])}l=function(){var q=b.extend({},n),p=q._progress.loaded;q.blob=j.call(e,c,c+d,e.type);q.chunkSize=q.blob.size;q.contentRange="bytes "+c+"-"+(c+q.chunkSize-1)+"/"+f;g._initXHRData(q);g._initProgressListener(q);i=((g._trigger("chunksend",null,q)!==false&&b.ajax(q))||g._getXHRPromise(false,q.context)).done(function(o,s,r){c=g._getUploadedBytes(r)||(c+q.chunkSize);if(p+q.chunkSize-q._progress.loaded){g._onProgress(b.Event("progress",{lengthComputable:true,loaded:c-q.uploadedBytes,total:c-q.uploadedBytes}),q)}n.uploadedBytes=q.uploadedBytes=c;q.result=o;q.textStatus=s;q.jqXHR=r;g._trigger("chunkdone",null,q);g._trigger("chunkalways",null,q);if(c<f){l()}else{k.resolveWith(q.context,[o,s,r])}}).fail(function(o,s,r){q.jqXHR=o;q.textStatus=s;q.errorThrown=r;g._trigger("chunkfail",null,q);g._trigger("chunkalways",null,q);k.rejectWith(q.context,[o,s,r])})};this._enhancePromise(m);m.abort=function(){return i.abort()};l();return m},_beforeSend:function(d,c){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(c);this._initProgressObject(c);c._progress.loaded=c.loaded=c.uploadedBytes||0;c._progress.total=c.total=this._getTotal(c.files)||1;c._progress.bitrate=c.bitrate=0;this._active+=1;this._progress.loaded+=c.loaded;this._progress.total+=c.total},_onDone:function(c,h,g,e){var f=e._progress.total,d=e._response;if(e._progress.loaded<f){this._onProgress(b.Event("progress",{lengthComputable:true,loaded:f,total:f}),e)}d.result=e.result=c;d.textStatus=e.textStatus=h;d.jqXHR=e.jqXHR=g;this._trigger("done",null,e)},_onFail:function(e,g,f,d){var c=d._response;if(d.recalculateProgress){this._progress.loaded-=d._progress.loaded;this._progress.total-=d._progress.total}c.jqXHR=d.jqXHR=e;c.textStatus=d.textStatus=g;c.errorThrown=d.errorThrown=f;this._trigger("fail",null,d)},_onAlways:function(e,f,d,c){this._trigger("always",null,c)},_onSend:function(i,g){if(!g.submit){this._addConvenienceMethods(i,g)}var h=this,k,c,j,d,l=h._getAJAXSettings(g),f=function(){h._sending+=1;l._bitrateTimer=new h._BitrateTimer();k=k||(((c||h._trigger("send",b.Event("send",{delegatedEvent:i}),l)===false)&&h._getXHRPromise(false,l.context,c))||h._chunkedUpload(l)||b.ajax(l)).done(function(e,n,m){h._onDone(e,n,m,l)}).fail(function(e,n,m){h._onFail(e,n,m,l)}).always(function(n,o,m){h._onAlways(n,o,m,l);h._sending-=1;h._active-=1;if(l.limitConcurrentUploads&&l.limitConcurrentUploads>h._sending){var e=h._slots.shift();while(e){if(h._getDeferredState(e)==="pending"){e.resolve();break}e=h._slots.shift()}}if(h._active===0){h._trigger("stop")}});return k};this._beforeSend(i,l);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){j=b.Deferred();this._slots.push(j);d=j.pipe(f)}else{this._sequence=this._sequence.pipe(f,f);d=this._sequence}d.abort=function(){c=[undefined,"abort","abort"];if(!k){if(j){j.rejectWith(l.context,c)}return f()}return k.abort()};return this._enhancePromise(d)}return f()},_onAdd:function(q,m){var p=this,v=true,u=b.extend({},this.options,m),f=m.files,s=f.length,g=u.limitMultiFileUploads,k=u.limitMultiFileUploadSize,t=u.limitMultiFileUploadSizeOverhead,o=0,n=this._getParamName(u),d,c,r,l,h=0;if(k&&(!s||f[0].size===undefined)){k=undefined}if(!(u.singleFileUploads||g||k)||!this._isXHRUpload(u)){r=[f];d=[n]}else{if(!(u.singleFileUploads||k)&&g){r=[];d=[];for(l=0;l<s;l+=g){r.push(f.slice(l,l+g));c=n.slice(l,l+g);if(!c.length){c=n}d.push(c)}}else{if(!u.singleFileUploads&&k){r=[];d=[];for(l=0;l<s;l=l+1){o+=f[l].size+t;if(l+1===s||((o+f[l+1].size+t)>k)||(g&&l+1-h>=g)){r.push(f.slice(h,l+1));c=n.slice(h,l+1);if(!c.length){c=n}d.push(c);h=l+1;o=0}}}else{d=n}}}m.originalFiles=f;b.each(r||f,function(e,i){var j=b.extend({},m);j.files=r?i:[i];j.paramName=d[e];p._initResponseObject(j);p._initProgressObject(j);p._addConvenienceMethods(q,j);v=p._trigger("add",b.Event("add",{delegatedEvent:q}),j);return v});return v},_replaceFileInput:function(e){var c=e.fileInput,d=c.clone(true);e.fileInputClone=d;b("<form></form>").append(d)[0].reset();c.after(d).detach();b.cleanData(c.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(f,g){if(g===c[0]){return d[0]}return g});if(c[0]===this.element[0]){this.element=d}},_handleFileTreeEntry:function(h,j){var e=this,i=b.Deferred(),d=function(l){if(l&&!l.entry){l.entry=h}i.resolve([l])},f=function(l){e._handleFileTreeEntries(l,j+h.name+"/").done(function(m){i.resolve(m)}).fail(d)},g=function(){k.readEntries(function(l){if(!l.length){f(c)}else{c=c.concat(l);g()}},d)},k,c=[];j=j||"";if(h.isFile){if(h._file){h._file.relativePath=j;i.resolve(h._file)}else{h.file(function(l){l.relativePath=j;i.resolve(l)},d)}}else{if(h.isDirectory){k=h.createReader();g()}else{i.resolve([])}}return i.promise()},_handleFileTreeEntries:function(c,e){var d=this;return b.when.apply(b,b.map(c,function(f){return d._handleFileTreeEntry(f,e)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(d){d=d||{};var c=d.items;if(c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)){return this._handleFileTreeEntries(b.map(c,function(f){var e;if(f.webkitGetAsEntry){e=f.webkitGetAsEntry();if(e){e._file=f.getAsFile()}return e}return f.getAsEntry()}))}return b.Deferred().resolve(b.makeArray(d.files)).promise()},_getSingleFileInputFiles:function(e){e=b(e);var c=e.prop("webkitEntries")||e.prop("entries"),d,f;if(c&&c.length){return this._handleFileTreeEntries(c)}d=b.makeArray(e.prop("files"));if(!d.length){f=e.prop("value");if(!f){return b.Deferred().resolve([]).promise()}d=[{name:f.replace(/^.*\\/,"")}]}else{if(d[0].name===undefined&&d[0].fileName){b.each(d,function(g,h){h.name=h.fileName;h.size=h.fileSize})}}return b.Deferred().resolve(d).promise()},_getFileInputFiles:function(c){if(!(c instanceof b)||c.length===1){return this._getSingleFileInputFiles(c)}return b.when.apply(b,b.map(c,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(f){var c=this,d={fileInput:b(f.target),form:b(f.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;if(c.options.replaceFileInput){c._replaceFileInput(d)}if(c._trigger("change",b.Event("change",{delegatedEvent:f}),d)!==false){c._onAdd(f,d)}})},_onPaste:function(f){var c=f.originalEvent&&f.originalEvent.clipboardData&&f.originalEvent.clipboardData.items,d={files:[]};if(c&&c.length){b.each(c,function(e,h){var g=h.getAsFile&&h.getAsFile();if(g){d.files.push(g)}});if(this._trigger("paste",b.Event("paste",{delegatedEvent:f}),d)!==false){this._onAdd(f,d)}}},_onDrop:function(g){g.dataTransfer=g.originalEvent&&g.originalEvent.dataTransfer;var c=this,f=g.dataTransfer,d={};if(f&&f.files&&f.files.length){g.preventDefault();this._getDroppedFiles(f).always(function(e){d.files=e;if(c._trigger("drop",b.Event("drop",{delegatedEvent:g}),d)!==false){c._onAdd(g,d)}})}},_onDragOver:a("dragover"),_onDragEnter:a("dragenter"),_onDragLeave:a("dragleave"),_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave});this._on(this.options.pasteZone,{paste:this._onPaste})}if(b.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(c,d){var e=b.inArray(c,this._specialOptions)!==-1;if(e){this._destroyEventHandlers()}this._super(c,d);if(e){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var c=this.options;if(c.fileInput===undefined){c.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(c.fileInput instanceof b)){c.fileInput=b(c.fileInput)}}if(!(c.dropZone instanceof b)){c.dropZone=b(c.dropZone)}if(!(c.pasteZone instanceof b)){c.pasteZone=b(c.pasteZone)}},_getRegExp:function(e){var d=e.split("/"),c=d.pop();d.shift();return new RegExp(d.join("/"),c)},_isRegExpOption:function(c,d){return c!=="url"&&b.type(d)==="string"&&/^\/.*\/[igm]{0,3}$/.test(d)},_initDataAttributes:function(){var d=this,c=this.options,e=b(this.element[0].cloneNode(false));b.each(e.data(),function(f,g){var h="data-"+f.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(e.attr(h)){if(d._isRegExpOption(f,g)){g=d._getRegExp(g)}c[f]=g}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(d){var c=this;if(!d||this.options.disabled){return}if(d.fileInput&&!d.files){this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;c._onAdd(null,d)})}else{d.files=b.makeArray(d.files);this._onAdd(null,d)}},send:function(g){if(g&&!this.options.disabled){if(g.fileInput&&!g.files){var e=this,c=b.Deferred(),h=c.promise(),d,f;h.abort=function(){f=true;if(d){return d.abort()}c.reject(null,"abort","abort");return h};this._getFileInputFiles(g.fileInput).always(function(i){if(f){return}if(!i.length){c.reject();return}g.files=i;d=e._onSend(null,g);d.then(function(j,l,k){c.resolve(j,l,k)},function(j,l,k){c.reject(j,l,k)})});return this._enhancePromise(h)}g.files=b.makeArray(g.files);if(g.files.length){return this._onSend(null,g)}}return this._getXHRPromise(false,g&&g.context)}})}));
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],a)}else{a(window.jQuery)}}(function(a){var b=a.blueimp.fileupload.prototype.options.add;a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(f,c){var d=a(this);c.process(function(){return d.fileupload("process",c)});b.call(this,f,c)}},processActions:{},_processFile:function(g,f){var e=this,c=a.Deferred().resolveWith(e,[g]),d=c.promise();this._trigger("process",null,g);a.each(g.processQueue,function(h,j){var k=function(i){if(f.errorThrown){return a.Deferred().rejectWith(e,[f]).promise()}return e.processActions[j.action].call(e,i,j)};d=d.pipe(k,j.always&&k)});d.done(function(){e._trigger("processdone",null,g);e._trigger("processalways",null,g)}).fail(function(){e._trigger("processfail",null,g);e._trigger("processalways",null,g)});return d},_transformProcessQueue:function(c){var d=[];a.each(c.processQueue,function(){var e={},g=this.action,f=this.prefix===true?g:this.prefix;a.each(this,function(h,i){if(a.type(i)==="string"&&i.charAt(0)==="@"){e[h]=c[i.slice(1)||(f?f+h.charAt(0).toUpperCase()+h.slice(1):h)]}else{e[h]=i}});d.push(e)});c.processQueue=d},processing:function(){return this._processing},process:function(e){var d=this,c=a.extend({},this.options,e);if(c.processQueue&&c.processQueue.length){this._transformProcessQueue(c);if(this._processing===0){this._trigger("processstart")}a.each(e.files,function(f){var h=f?a.extend({},c):c,g=function(){if(e.errorThrown){return a.Deferred().rejectWith(d,[e]).promise()}return d._processFile(h,e)};h.index=f;d._processing+=1;d._processingQueue=d._processingQueue.pipe(g,g).always(function(){d._processing-=1;if(d._processing===0){d._trigger("processstop")}})})}return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=a.Deferred().resolveWith(this).promise()}})}));
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],a)}else{a(window.jQuery,window.loadImage)}}(function(a,b){a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:true,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:10000000,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:false,imageCrop:false,disableImageResize:true,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:true,previewThumbnail:true,previewCrop:false,previewCanvas:true},processActions:{loadImage:function(g,d){if(d.disabled){return g}var f=this,e=g.files[g.index],c=a.Deferred();if((a.type(d.maxFileSize)==="number"&&e.size>d.maxFileSize)||(d.fileTypes&&!d.fileTypes.test(e.type))||!b(e,function(h){if(h.src){g.img=h}c.resolveWith(f,[g])},d)){return g}return c.promise()},resizeImage:function(h,e){if(e.disabled||!(h.canvas||h.img)){return h}e=a.extend({canvas:true},e);var f=this,c=a.Deferred(),d=(e.canvas&&h.canvas)||h.img,g=function(j){if(j&&(j.width!==d.width||j.height!==d.height||e.forceResize)){h[j.getContext?"canvas":"img"]=j}h.preview=j;c.resolveWith(f,[h])},i;if(h.exif){if(e.orientation===true){e.orientation=h.exif.get("Orientation")}if(e.thumbnail){i=h.exif.get("Thumbnail");if(i){b(i,g,e);return c.promise()}}if(h.orientation){delete e.orientation}else{h.orientation=e.orientation}}if(d){g(b.scale(d,e));return c.promise()}return h},saveImage:function(g,d){if(!g.canvas||d.disabled){return g}var f=this,e=g.files[g.index],c=a.Deferred();if(g.canvas.toBlob){g.canvas.toBlob(function(h){if(!h.name){if(e.type===h.type){h.name=e.name}else{if(e.name){h.name=e.name.replace(/\..+$/,"."+h.type.substr(6))}}}if(e.type!==h.type){delete g.imageHead}g.files[g.index]=h;c.resolveWith(f,[g])},d.type||e.type,d.quality)}else{return g}return c.promise()},loadImageMetaData:function(f,d){if(d.disabled){return f}var e=this,c=a.Deferred();b.parseMetaData(f.files[f.index],function(g){a.extend(f,g);c.resolveWith(e,[f])},d);return c.promise()},saveImageMetaData:function(f,d){if(!(f.imageHead&&f.canvas&&f.canvas.toBlob&&!d.disabled)){return f}var e=f.files[f.index],c=new Blob([f.imageHead,this._blobSlice.call(e,20)],{type:e.type});c.name=e.name;f.files[f.index]=c;return f},setImage:function(d,c){if(d.preview&&!c.disabled){d.files[d.index][c.name||"preview"]=d.preview}return d},deleteImageReferences:function(d,c){if(!c.disabled){delete d.img;delete d.canvas;delete d.preview;delete d.imageHead}return d}}})}));
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","load-image","./jquery.fileupload-process"],a)}else{a(window.jQuery,window.loadImage)}}(function(a,b){a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:true,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(g,d){if(d.disabled){return g}var e=g.files[g.index],c,f;if(this._audioElement.canPlayType&&this._audioElement.canPlayType(e.type)&&(a.type(d.maxFileSize)!=="number"||e.size<=d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(e.type))){c=b.createObjectURL(e);if(c){f=this._audioElement.cloneNode(false);f.src=c;f.controls=true;g.audio=f;return g}}return g},setAudio:function(d,c){if(d.audio&&!c.disabled){d.files[d.index][c.name||"preview"]=d.audio}return d}}})}));
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","load-image","./jquery.fileupload-process"],a)}else{a(window.jQuery,window.loadImage)}}(function(a,b){a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:true,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(g,d){if(d.disabled){return g}var e=g.files[g.index],c,f;if(this._videoElement.canPlayType&&this._videoElement.canPlayType(e.type)&&(a.type(d.maxFileSize)!=="number"||e.size<=d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(e.type))){c=b.createObjectURL(e);if(c){f=this._videoElement.cloneNode(false);f.src=c;f.controls=true;g.video=f;return g}}return g},setVideo:function(d,c){if(d.video&&!c.disabled){d.files[d.index][c.name||"preview"]=d.video}return d}}})}));
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload-process"],a)}else{a(window.jQuery)}}(function(a){a.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:true,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{getNumberOfFiles:a.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(g,d){if(d.disabled){return g}var c=a.Deferred(),f=this.options,e=g.files[g.index],b;if(d.minFileSize||d.maxFileSize){b=e.size}if(a.type(d.maxNumberOfFiles)==="number"&&(f.getNumberOfFiles()||0)+g.files.length>d.maxNumberOfFiles){e.error=f.i18n("maxNumberOfFiles")}else{if(d.acceptFileTypes&&!(d.acceptFileTypes.test(e.type)||d.acceptFileTypes.test(e.name))){e.error=f.i18n("acceptFileTypes")}else{if(b>d.maxFileSize){e.error=f.i18n("maxFileSize")}else{if(a.type(b)==="number"&&b<d.minFileSize){e.error=f.i18n("minFileSize")}else{delete e.error}}}}if(e.error||g.files.error){g.files.error=true;c.rejectWith(this,[g])}else{c.resolveWith(this,[g])}return c.promise()}}})}));
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],a)}else{a(window.jQuery,window.tmpl)}}(function(b,a){b.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{autoUpload:false,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:false,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(c){if(c.result&&b.isArray(c.result.files)){return c.result.files}return[]},add:function(h,f){if(h.isDefaultPrevented()){return false}var g=b(this),d=g.data("blueimp-fileupload")||g.data("fileupload"),c=d.options;f.context=d._renderUpload(f.files).data("data",f).addClass("processing");c.filesContainer[c.prependFiles?"prepend":"append"](f.context);d._forceReflow(f.context);d._transition(f.context);f.process(function(){return g.fileupload("process",f)}).always(function(){f.context.each(function(e){b(this).find(".size").text(d._formatFileSize(f.files[e].size))}).removeClass("processing");d._renderPreviews(f)}).done(function(){f.context.find(".start").prop("disabled",false);if((d._trigger("added",h,f)!==false)&&(c.autoUpload||f.autoUpload)&&f.autoUpload!==false){f.submit()}}).fail(function(){if(f.files.error){f.context.each(function(i){var e=f.files[i].error;if(e){b(this).find(".error").text(e)}})}})},send:function(f,d){if(f.isDefaultPrevented()){return false}var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload");if(d.context&&d.dataType&&d.dataType.substr(0,6)==="iframe"){d.context.find(".progress").addClass(!b.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%")}return c._trigger("sent",f,d)},done:function(j,i){if(j.isDefaultPrevented()){return false}var h=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d=i.getFilesFromResponse||h.options.getFilesFromResponse,g=d(i),f,c;if(i.context){i.context.each(function(e){var k=g[e]||{error:"Empty file upload result"};c=h._addFinishedDeferreds();h._transition(b(this)).done(function(){var l=b(this);f=h._renderDownload([k]).replaceAll(l);h._forceReflow(f);h._transition(f).done(function(){i.context=b(this);h._trigger("completed",j,i);h._trigger("finished",j,i);c.resolve()})})})}else{f=h._renderDownload(g)[h.options.prependFiles?"prependTo":"appendTo"](h.options.filesContainer);h._forceReflow(f);c=h._addFinishedDeferreds();h._transition(f).done(function(){i.context=b(this);h._trigger("completed",j,i);h._trigger("finished",j,i);c.resolve()})}},fail:function(h,g){if(h.isDefaultPrevented()){return false}var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d,c;if(g.context){g.context.each(function(e){if(g.errorThrown!=="abort"){var i=g.files[e];i.error=i.error||g.errorThrown||g.i18n("unknownError");c=f._addFinishedDeferreds();f._transition(b(this)).done(function(){var j=b(this);d=f._renderDownload([i]).replaceAll(j);f._forceReflow(d);f._transition(d).done(function(){g.context=b(this);f._trigger("failed",h,g);f._trigger("finished",h,g);c.resolve()})})}else{c=f._addFinishedDeferreds();f._transition(b(this)).done(function(){b(this).remove();f._trigger("failed",h,g);f._trigger("finished",h,g);c.resolve()})}})}else{if(g.errorThrown!=="abort"){g.context=f._renderUpload(g.files)[f.options.prependFiles?"prependTo":"appendTo"](f.options.filesContainer).data("data",g);f._forceReflow(g.context);c=f._addFinishedDeferreds();f._transition(g.context).done(function(){g.context=b(this);f._trigger("failed",h,g);f._trigger("finished",h,g);c.resolve()})}else{f._trigger("failed",h,g);f._trigger("finished",h,g);f._addFinishedDeferreds().resolve()}}},progress:function(f,d){if(f.isDefaultPrevented()){return false}var c=Math.floor(d.loaded/d.total*100);if(d.context){d.context.each(function(){b(this).find(".progress").attr("aria-valuenow",c).children().first().css("width",c+"%")})}},progressall:function(h,f){if(h.isDefaultPrevented()){return false}var g=b(this),d=Math.floor(f.loaded/f.total*100),c=g.find(".fileupload-progress"),i=c.find(".progress-extended");if(i.length){i.html((g.data("blueimp-fileupload")||g.data("fileupload"))._renderExtendedProgress(f))}c.find(".progress").attr("aria-valuenow",d).children().first().css("width",d+"%")},start:function(d){if(d.isDefaultPrevented()){return false}var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload");c._resetFinishedDeferreds();c._transition(b(this).find(".fileupload-progress")).done(function(){c._trigger("started",d)})},stop:function(f){if(f.isDefaultPrevented()){return false}var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),c=d._addFinishedDeferreds();b.when.apply(b,d._getFinishedDeferreds()).done(function(){d._trigger("stopped",f)});d._transition(b(this).find(".fileupload-progress")).done(function(){b(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");b(this).find(".progress-extended").html("&nbsp;");c.resolve()})},processstart:function(c){if(c.isDefaultPrevented()){return false}b(this).addClass("fileupload-processing")},processstop:function(c){if(c.isDefaultPrevented()){return false}b(this).removeClass("fileupload-processing")},destroy:function(f,d){if(f.isDefaultPrevented()){return false}var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),g=function(){c._transition(d.context).done(function(){b(this).remove();c._trigger("destroyed",f,d)})};if(d.url){d.dataType=d.dataType||c.options.dataType;b.ajax(d).done(g).fail(function(){c._trigger("destroyfailed",f,d)})}else{g()}}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(c){if(!c){c=b.Deferred()}this._finishedUploads.push(c);return c},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var f=b(this),d=f.prop("href"),c=f.prop("download"),e="application/octet-stream";f.bind("dragstart",function(g){try{g.originalEvent.dataTransfer.setData("DownloadURL",[e,c,d].join(":"))}catch(h){}})},_formatFileSize:function(c){if(typeof c!=="number"){return""}if(c>=1000000000){return(c/1000000000).toFixed(2)+" GB"}if(c>=1000000){return(c/1000000).toFixed(2)+" MB"}return(c/1000).toFixed(2)+" KB"},_formatBitrate:function(c){if(typeof c!=="number"){return""}if(c>=1000000000){return(c/1000000000).toFixed(2)+" Gbit/s"}if(c>=1000000){return(c/1000000).toFixed(2)+" Mbit/s"}if(c>=1000){return(c/1000).toFixed(2)+" kbit/s"}return c.toFixed(2)+" bit/s"},_formatTime:function(d){var c=new Date(d*1000),e=Math.floor(d/86400);e=e?e+"d ":"";return e+("0"+c.getUTCHours()).slice(-2)+":"+("0"+c.getUTCMinutes()).slice(-2)+":"+("0"+c.getUTCSeconds()).slice(-2)},_formatPercentage:function(c){return(c*100).toFixed(2)+" %"},_renderExtendedProgress:function(c){return this._formatBitrate(c.bitrate)+" | "+this._formatTime((c.total-c.loaded)*8/c.bitrate)+" | "+this._formatPercentage(c.loaded/c.total)+" | "+this._formatFileSize(c.loaded)+" / "+this._formatFileSize(c.total)},_renderTemplate:function(e,d){if(!e){return b()}var c=e({files:d,formatFileSize:this._formatFileSize,options:this.options});if(c instanceof b){return c}return b(this.options.templatesContainer).html(c).children()},_renderPreviews:function(c){c.context.find(".preview").each(function(d,e){b(e).append(c.files[d].preview)})},_renderUpload:function(c){return this._renderTemplate(this.options.uploadTemplate,c)},_renderDownload:function(c){return this._renderTemplate(this.options.downloadTemplate,c).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(g){g.preventDefault();var c=b(g.currentTarget),d=c.closest(".template-upload"),f=d.data("data");c.prop("disabled",true);if(f&&f.submit){f.submit()}},_cancelHandler:function(f){f.preventDefault();var c=b(f.currentTarget).closest(".template-upload,.template-download"),d=c.data("data")||{};d.context=d.context||c;if(d.abort){d.abort()}else{d.errorThrown="abort";this._trigger("fail",f,d)}},_deleteHandler:function(d){d.preventDefault();var c=b(d.currentTarget);this._trigger("destroy",d,b.extend({context:c.closest(".template-download"),type:"DELETE"},c.data()))},_forceReflow:function(c){return b.support.transition&&c.length&&c[0].offsetWidth},_transition:function(d){var c=b.Deferred();if(b.support.transition&&d.hasClass("fade")&&d.is(":visible")){d.bind(b.support.transition.end,function(f){if(f.target===d[0]){d.unbind(b.support.transition.end);c.resolveWith(d)}}).toggleClass("in")}else{d.toggleClass("in");c.resolveWith(d)}return c},_initButtonBarEventHandlers:function(){var c=this.element.find(".fileupload-buttonbar"),d=this.options.filesContainer;this._on(c.find(".start"),{click:function(f){f.preventDefault();d.find(".start").click()}});this._on(c.find(".cancel"),{click:function(f){f.preventDefault();d.find(".cancel").click()}});this._on(c.find(".delete"),{click:function(f){f.preventDefault();d.find(".toggle:checked").closest(".template-download").find(".delete").click();c.find(".toggle").prop("checked",false)}});this._on(c.find(".toggle"),{change:function(f){d.find(".toggle").prop("checked",b(f.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",true).parent().addClass("disabled")},_initTemplates:function(){var c=this.options;c.templatesContainer=this.document[0].createElement(c.filesContainer.prop("nodeName"));if(a){if(c.uploadTemplateId){c.uploadTemplate=a(c.uploadTemplateId)}if(c.downloadTemplateId){c.downloadTemplate=a(c.downloadTemplateId)}}},_initFilesContainer:function(){var c=this.options;if(c.filesContainer===undefined){c.filesContainer=this.element.find(".files")}else{if(!(c.filesContainer instanceof b)){c.filesContainer=b(c.filesContainer)}}},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();if(!b.support.fileInput){this._disableFileInputButton()}},enable:function(){var c=false;if(this.options.disabled){c=true}this._super();if(c){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton()}this._super()}})}));